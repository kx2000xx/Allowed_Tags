# الوصف 
سكربت مخصص لتسمية الملفات بطريقة صحيحة لتتوافق مع فهارس اليوزنت و على معايير الـScene. السكربت مبني على برنامج FileBot للتسمية، mediainfo لإستخراج ملفات الـNFO و الـMediaInfo بصيغة xml، و الرفع على شبكة اليوزنت بإستخدام ngpost و أخيراً على الفهرس الذي تريده


# طريقة التنصيب على اللينكس (مجرب على نظام ubuntu 22  و ubuntu 24)
بعد تحميل نسخة اللينيكس من صفحة Release اذهب الى مسار الملف و ثم في الـterminal اكتب الأوامر التالية:


**ملاحظة: قم بوضع رخصة الـfilebot في مجلد الـmedia_renamer بجانب الـinstall.sh حتى يتم تفعيله بشكل تلقائي عن تشغيل الملف.**

```
unzip media_renamer.v1.6.2-Linux.zip
cd media_renamer.v1.6.2-Linux
chmod +x install.sh
chmod +x media_renamer
chmod +x nzbCheck
./install.sh
```
بعد إكتمال عملية التنصيب قم بتشغيل الأمر التالي لتشغيل البرنامج:
```
./media_renamer
```
**ملاحظة: يجب تشغيل البرنامج من داخل مجلده الخاص لتفادي المشاكل.**
## الوسوم المعتمدة
سيقوم السكربت بإعتماد الوسوم الموجودة في ملف allowed_tags في عملية تفقد الأسم بعد إعادة تسمية الملفات.
# فيديو توضيحي
https://github.com/user-attachments/assets/5c84bdb6-0672-4166-ba75-7872316ff9df
## شرح طريقة استخدام البرنامج:
1. قم بتحميل النسخة بكامل المتطلبات من قسم الـreleases
2. بعد فك الضغط قم بفتح ملف config.json و تعبئة الخانات التالية:
   


| القيمة  | الشرح |
| ------------- | ------------- |
| always_tags  | الوسوم التي ستقوم بإستخدامها بشكل دائم و التي ستكون على جميع الملفات (قم بوضعه فارغ اذا لم تكن هناك وسوم دائمة و ثابتة)  |
| Indexer_API_KEY  |المفتاح الخاص بحسابك في فهرس اليوزنت المستخدم  |
| Delete-After-Upload  | (true/false) حذف الملفات الأصلية بعد الرفع|
| usenet_host  | السيرفر المستخدم للرفع على شبكة اليوزنت  |
| usenet_port  | المنفذ المستخدم الخاص بسيرفر اليوزنت  |
| usenet_username  |  اسم المستخدم الخاص بك الخاص بالسيرفر عند الرفع على شبكة اليوزنت|
| usenet_password  | كلمة المرور الخاصة بك بالسيرفر عند الرفع على شبكة اليوزنت  |
| usenet_connections  | عدد الإتصالات بالسيرفر عند الرفع  |
| usenet_upload_threads  | عدد الثريدس عند الرفع  |
| usenet_enable_ssl  | (true/false) تفعيل و إطفاء   |
| renaming_type  | local(محلي)/remote(عن بعد)   |
| filebot_node  | سيرفر التسمية عن بعد (يعمل فقط عند إختيار remote)   |



**ملاحظة: يجب ان يكون الـport المستخدم يدعم الـSSL**

**ملاحظة: يفضل إستخدام التسمية المحلية برخصة مفعلة لبرنامج الـFileBot اذا وجدت**


3. ستقوم بوضع جميع المجلدات الي تخص الأعمال سواء كانت مسلسلات او افلام في مجلد files
4. ستقوم بإعادة تسمية المجلدات الخاصة بالأعمال و ستقوم بإعتماد ارقام أو الـIDs الخاصة بالأفلام من TMDB و المسلسلات من TVDB بالإضافة الى وضع الوسوم المطلوبة بالشكل التالي:
- **TMDB193434 WEB-DL SHAHID**
- **TVDB398819 BluRay**
- **TVDB305074 WEB-DL SGO**


**ملاحظة: لن تقوم بوضع اي وسم يتعلق باللغة سواء كان للترجمات او الأصوات لأنه سيتم أخذه من بيانات الـmetadata الخاصة بملف الفيديو (يقوم بالتعرف على وسوم ArSub و ArSubs و MultiSubs و Arabic.Dub و  من دون تدخل منك). إذا كانت هناك مشكلة في هذه البيانات يرجى تعديلها من وسوم الـtracks للملفات بأدوات مثل MKVToolNix و MKVClever قبل البدء بهذه العملية**


تستطيع كذلك في تسمية مجلد العمل بأن تضيف بعض الوسوم الزائدة و الموجودة في additional_types في allowed_types:
- **TVDB13969 BluRay DC REMUX REMASTERED**


ملاحظة: وسوم الـadditioanl_types هي التي يمكنك استخدامها في خانة always_tags في ملف الـconfig فقط

إذا كان نوع الإصدار WEBRip أو WEB-DL لابد من إضافة اسم المنصة:
- **TVDB87181 WEB-DL StarzPlay**

إذا كان هناك عمل غير موجود في TVDB و TMDB قم بإضافته في الموقع المخصص للأفلام TMDB للمسلسلات TVDB

في مرحلة إعادة التسمية سيكون كل فلم او مسلسل في مجلد خاص به داخل مجلد files

TMDB1726 BluRay —> movie —> ironman.mp4 :x:

TMDB1726 BluRay —> ironman.mp4 :white_check_mark:

بالنسبة الى ارقام و اسماء الحلقات في المسلسلات في مرحلة إعادة التسمية يجب أن تكون اسماء ملفات الحلقات بصيغة S00E00 كالتالي:
```

S01E01.mkv
S01E02.mkv
S01E03.mkv
S02E01.mkv
S02E02.mkv
S02E03.mkv

```

**كل المواسم ستكون في الملف نفسه بطريقة الترقيم المذكورة في الأعلى. لا تقم بوضع كل موسم في مجلد لوحده في المجلد الرئيسي**

5. بخصوص اسم الفريق، ستقوم بكتابته على اسم مجلد الفلم او المسلسل (TVDBxxx/TMDBxxxx) بجانب الوسوم الأخرى بالشكل التالي:

- **TMDB66562 WEB-DL SGO Group(FuturePirates)**

6. بعد تشغيل السكربت ستظهر لك القائمة و منها تقوم بإختيار رقم 2 لإضافة الوسوم الموجودة على المجلد في ملفات العمل التي تخصه
7. سيقوم السكربت بتغيير حاوية الملفات الى mkv و ثم حقن الوسوم في الملفات (metadata) (ملاحظة: اذا كانت الملفات mkv سيقوم بعملية حقن فقط. اما اذا كانت صيغة اخرى مثل mp4 فسيقوم بتحويل الملف و حقن المعلومات و منها يمكنك ايجادها في معلومات الـmediainfo الخاصة بالملف)
8. سيقوم السكربت بسؤالك ما اذا كنت تريد حذف الملفات القديمة بعد عملية التحويل و الحقن (التطبيق على الملفات التي صيغتها ليست mkv فقط). إذا جاوبت بالرفض، فسيقوم بالتحويل و لكن بعد عملية التحويل ستكون لديك الملفات القديمة و الجديدة. قم بعزل الجديد عن القديم حتى لا تواجه مشكلة في الخطوات القادمة.
9. سيطلب منك التأكد من الملفات، بعد ذلك إضغط Enter ليباشر بعملية إعادة التسمية. سيقوم بتسمية كل المسلسلات و الأفلام بناءً على المعطيات التي اعطيتها للأعمال بالخصوص الموجودة في الـmetadata الخاصة بالعمل (مأخوذة من عملية حقن الوسوم في الملف). بعد عملية التأكد سيطلب منك السكربت التأكد من الملفات قبل العملية الثانية
10. المرحلة التالية هي التحقق من صحة اسم الملف ثم إستخراج ملفات الـnfo و الـxml الخاصة بالـmediainfo لكل ملف فيديو.
11.  سيقوم برفع كل الملفات على شبكة اليوزنت تلقائياً.
12. الخطوة الأخيرة هي سيقوم السكربت برفع ملفات الـnfo و الـxml و الـnzb الى الإندكسر مباشرة و بشكل تلقائي.

### ملاحظات مهمة
- لا تنسى ان تقوم بوضع الـAPI Key الخاص بالإندكسر في config.json
- قم بوضع سيرفر اليوزنت و اسم المستخدم و كلمة السر في config.json
- قم بإضافة الوسوم الصحيحة على الأصوات و الترجمات بإستخدام برنامج mkvtoolnix أو اي برنامج آخر (برنامج ياسر)
- قم بإستخدام الخطوة الثانية لإضافة اسم الفريق الرافع و الوسوم الأخرى في الـmetadata الخاصة بالملفات كونها ستكون الدعامة في مرحلة إعادة تسمية الملفات.
- اذا كان عندك ملف قديم على سبيل المثال من دون وسم عربي على الصوت (إذا كان صوت واحد في الفيديو) او الصيغة ليست mkv، قم بإختيار أو البدء من الخطوة الأولى و سيقوم السكربت بإضافة الوسم العربي على الصوت و تحويل حاوية الملف الى mkv
- قم بالتأكد دائمة من تنظيف مجلد temp و nzb بعد كل عملية رفع، اذا كانت هناك بقايا من الممكن ان تسبب لك بعض المشاكل مع المرفوعات المستقبلية.
- لو واجهت مشكلة في خطوة معينة تستطيع فقط إعادة تشغيل السكربت بعد إصلاح المشكلة و اختيار الخطوة مرة اخرى بدلاً من بدء العملية من جديد (خصوصاً إذا كانت التسمية جاهزة مسبقاً كل ما عليك فعله هو البدء من الخطوة الرابعة، إستخراج ملفات الـmediainfo xml و الـNFO)

## ملاحظات على تسمية الأعمال المترجمة
إذا قمت بكتابة TeamSub على اسم المجلد يجب عليك ان تكتب اسم الفريق و لو كان اكثر من شخص او فريق أو منصة اشتركوا في ترجمة واحدة، ستقوم بكتابتهم و فصلهم بنقطة(person1.person2) و سيقوم بإضافة ArSub إفتراضياً بدون تدخل منك. يجب أن يكون ملف الفيديو الواحد يحتوي على ترجمة عربية واحدة فقط. يجب كتابة الوسم بالشكل التالي:


- **TVDB361709 WEB-DL CR TeamSub(MugiSubs.WNSubs) Group(AnimeDown)**

إذا كانت ترجمة محروقة على الملفات ستقوم بإضافة وسم HardSub في تسمية المجلد. يجب ان يكون ملف الفيديو الواحد لا يحتوي على اي ملف ترجمة Soft. التسمية تكون بالشكل التالي:


- **TVDB361709 WEB-DL CR HardSub Group(AnimeDown)**


إذا واجهت مشكلة، يرجى التواصل مع المطور.
